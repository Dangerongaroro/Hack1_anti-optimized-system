import{r as e,R as t,j as n}from"./vendor-react-8DDf6oIR.js";import{S as s,C as r,M as o,a as i,A as a,b as c,c as l,V as u,d as h,O as d,e as p,P as g,B as m,f,g as y,h as v,i as w,D as x,Q as D,j as S,L as M,k as b,l as P,W as C,m as T,R,n as k}from"./vendor-three-BEq7hK8x.js";import{C as E,a as L,B as z,b as F,S as I,T as j,c as A,d as O,e as _,f as Y,A as H,g as X,P as N,X as $,h as B,U as q,i as U,j as V,H as J,k as W,M as G,l as Q,m as K,n as Z,o as ee}from"./vendor-icons-CRzGubcW.js";const te={Music:ee,MapPin:Z,Coffee:K,Palette:Q,Mountain:G,Code:W,Home:J,Compass:V,BookOpen:U,User:q,ChevronRight:B,X:$,Plus:N,Calendar:X,Award:H,Sparkles:Y,TrendingUp:_,Star:O,ThumbsUp:A,ThumbsDown:j,SkipForward:I,HelpCircle:F,Book:z,Camera:L,Clock:E},ne={1:[{title:"æ™®æ®µè´ã‹ãªã„ã‚¸ãƒ£ãƒ³ãƒ«ã®éŸ³æ¥½ã‚’1æ›²è´ã",icon:"Music",category:"ã‚¢ãƒ¼ãƒˆ",type:"music"},{title:"ã„ã¤ã‚‚ã¨é•ã†é“ã§å¸°ã‚‹",icon:"MapPin",category:"ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢",type:"place"},{title:"çŸ¥ã‚‰ãªã„é£²ã¿ç‰©ã‚’è©¦ã—ã¦ã¿ã‚‹",icon:"Coffee",category:"é£Ÿ",type:"place"}],2:[{title:"éš£ç”ºã®ã‚«ãƒ•ã‚§ã‚’é–‹æ‹“ã™ã‚‹",icon:"Coffee",category:"ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢",type:"place"},{title:"ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§å˜ç™ºã®çµµç”»æ•™å®¤ã«å‚åŠ ",icon:"Palette",category:"ã‚¢ãƒ¼ãƒˆ",type:"art"},{title:"æ–°ã—ã„ãƒ¬ã‚·ãƒ”ã§æ–™ç†ã«æŒ‘æˆ¦",icon:"Book",category:"é£Ÿ",type:"skill"}],3:[{title:"æ—¥å¸°ã‚Šã§è¿‘éƒŠã®å±±ã«ãƒã‚¤ã‚­ãƒ³ã‚°",icon:"Mountain",category:"ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢",type:"outdoor"},{title:"ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®å…¥é–€æ›¸ã‚’1ç« èª­ã‚€",icon:"Code",category:"å­¦ã³",type:"skill"},{title:"åœ°å…ƒã®ç¾è¡“é¤¨ã§ç‰¹åˆ¥å±•ã‚’é‘‘è³",icon:"Palette",category:"ã‚¢ãƒ¼ãƒˆ",type:"art"}]},se=e=>{const t=ne[e]||ne[2];if(!t||0===t.length)return{title:"ã‚¨ãƒ©ãƒ¼: é©åˆ‡ãªãƒãƒ£ãƒ¬ãƒ³ã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",icon:"HelpCircle",category:"ã‚¨ãƒ©ãƒ¼",type:"error",level:e};return{id:`local_${Date.now()}`,title:t[Math.floor(Math.random()*t.length)].title,description:"ã“ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã¯ã‚ãªãŸã®ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚",category:t[Math.floor(Math.random()*t.length)].category,type:"challenge",level:e}};function re(e,t){const n={"ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«":30,"ã‚¢ãƒ¼ãƒˆãƒ»å‰µä½œ":280,"æ–™ç†ãƒ»ã‚°ãƒ«ãƒ¡":50,"ã‚½ãƒ¼ã‚·ãƒ£ãƒ«":330,"å­¦ç¿’ãƒ»èª­æ›¸":210,"è‡ªç„¶ãƒ»ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢":120,"ã‚¹ãƒãƒ¼ãƒ„ãƒ»é‹å‹•":170,"ã‚¨ãƒ³ã‚¿ãƒ¡":0,"ãã®ä»–":200},s=ie(t);let r;return r=s&&n[s]?n[s]:("number"==typeof e?47*e:e?47*e.toString().length:0)%360,`hsl(${r}, 70%, 75%)`}const oe=["ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«","ã‚¢ãƒ¼ãƒˆãƒ»å‰µä½œ","æ–™ç†ãƒ»ã‚°ãƒ«ãƒ¡","ã‚½ãƒ¼ã‚·ãƒ£ãƒ«","å­¦ç¿’ãƒ»èª­æ›¸","è‡ªç„¶ãƒ»ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢","ã‚¹ãƒãƒ¼ãƒ„ãƒ»é‹å‹•","ã‚¨ãƒ³ã‚¿ãƒ¡","ãã®ä»–"],ie=e=>{if(!e)return"ãã®ä»–";if(oe.includes(e))return e;return oe.find((t=>t.includes(e)||e.includes(t)))||"ãã®ä»–"};const ae=new class{constructor(){this.geometryPool={sphere_small:new s(.2,16,16),sphere_medium:new s(.25,16,16),sphere_large:new s(.3,16,16),cylinder_thread:new r(.05,.05,1,8,1),particle_small:new s(.03,6,6),particle_tiny:new s(.02,8,8)},this.materialPool=new Map,this.spiralPositions=null,this.floatingPositions=null,this.connectionCurves=new Map}seededRandom(e){const t=1e4*Math.sin(e);return t-Math.floor(t)}precomputeSpiralPositions(e){if(this.spiralPositions&&this.spiralPositions.length===e)return this.spiralPositions;const t=[];for(let n=0;n<e;n++){const s=n/Math.max(e-1,1),r=6*s-3,o=2+.8*s,i=n+1e3,a=2*s*Math.PI*2+(this.seededRandom(1.234*i)-.5)*Math.PI/3,c=Math.cos(a)*o,l=Math.sin(a)*o,u=r,h=.8+.4*this.seededRandom(2.345*i),d=1.5*(this.seededRandom(3.456*i)-.5);t.push({x:c*h,y:l*h+d,z:u,scale:.8+.4*this.seededRandom(4.567*i)})}return this.spiralPositions=t,t}precomputeFloatingPositions(e,t=[]){if(this.floatingPositions&&this.floatingPositions.length===e)return this.floatingPositions;const n=[];if(0===t.length)for(let s=0;s<e;s++){const t=s/Math.max(e,1)*Math.PI*2,r=s+2e3,o=2*Math.cos(t),i=2*Math.sin(t),a=2*this.seededRandom(3.456*r)-1;n.push({x:o,y:i,z:a,seed:r})}else{const s=t[t.length-1],r=t.length;for(let t=0;t<e;t++){const e=r+t,o=e/Math.max(e,1),i=2*o*Math.PI*2,a=s.z+.8*(t+1),c=2.5+.5*o,l=t+2e3,u=i+(this.seededRandom(1.234*l)-.5)*Math.PI/4,h=Math.cos(u)*c,d=Math.sin(u)*c,p=a,g=1*(this.seededRandom(3.456*l)-.5);n.push({x:h,y:d+g,z:p,seed:l})}}return this.floatingPositions=n,n}getMaterial(e,t,n={}){const s=`${e}_${t}_${JSON.stringify(n)}`;if(!this.materialPool.has(s)){let r;switch(e){case"completed_sphere":r=new l({color:new i(t),transparent:!0,opacity:.95,metalness:.4,roughness:.05,emissive:new i(t),emissiveIntensity:.8,...n});break;case"floating_mission":r=new l({color:new i(t),transparent:!0,opacity:.95,metalness:.1,roughness:.05,emissive:new i(t).multiplyScalar(.6),emissiveIntensity:.7,...n});break;case"thread":r=new c({color:new i(t),transparent:!0,opacity:.8,emissive:new i(t),emissiveIntensity:.2,...n});break;case"particle":r=new o({color:new i(t),transparent:!0,opacity:.9,blending:a,...n});break;default:r=new o({color:new i(t),...n})}this.materialPool.set(s,r)}return this.materialPool.get(s)}getConnectionCurve(e,t,n){if(this.connectionCurves.has(n))return this.connectionCurves.get(n);const s=e.distanceTo(t),r=new u;r.addVectors(e,t),r.multiplyScalar(.5);const o=n%1e3/1e3,i=.3*s;r.add(new u((o-.5)*i,(.7*o-.35)*i,(.3*o-.15)*i));const a=new h([e.clone(),r,t.clone()]),c=a.getPoints(30),l={curve:a,points:c,segments:30,distance:s};return this.connectionCurves.set(n,l),l}dispose(){Object.values(this.geometryPool).forEach((e=>{e.dispose()})),this.materialPool.forEach((e=>{e.dispose()})),this.spiralPositions=null,this.floatingPositions=null,this.connectionCurves.clear()}};class ce{constructor(){this.animationFrameId=null,this.isRunning=!1,this.callbacks=new Set,this.lastFrameTime=0,this.targetFPS=60,this.frameInterval=1e3/this.targetFPS}addCallback(e){this.callbacks.add(e)}removeCallback(e){this.callbacks.delete(e)}start(){if(this.isRunning)return;this.isRunning=!0,this.lastFrameTime=performance.now();const e=t=>{if(!this.isRunning)return;const n=t-this.lastFrameTime;n>=this.frameInterval&&(this.callbacks.forEach((e=>{e(t,n)})),this.lastFrameTime=t),this.animationFrameId=requestAnimationFrame(e)};this.animationFrameId=requestAnimationFrame(e)}stop(){this.isRunning=!1,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}dispose(){this.stop(),this.callbacks.clear()}}const le=e=>{const t=new m,n=1500,s=new Float32Array(4500),r=new Float32Array(4500),o=new Float32Array(n);console.log("â­ æ˜Ÿç©ºä½œæˆé–‹å§‹: æ˜Ÿã®æ•° =",n);for(let a=0;a<n;a++){const e=3*a,t=ae.seededRandom(12.9898*a),n=ae.seededRandom(78.233*a),c=ae.seededRandom(39.346*a),l=40+40*c,u=t*Math.PI*2,h=n*Math.PI;s[e]=l*Math.sin(h)*Math.cos(u),s[e+1]=l*Math.sin(h)*Math.sin(u),s[e+2]=l*Math.cos(h);const d=new i;t<.5?d.setHSL(.15,.2,.7+.3*n):t<.75?d.setHSL(.6,.5,.6+.4*n):t<.9?d.setHSL(.1,.6,.5+.4*n):d.setHSL(0,.7,.4+.3*n),r[e]=d.r,r[e+1]=d.g,r[e+2]=d.b,o[a]=.3+1.2*c}t.setAttribute("position",new f(s,3)),t.setAttribute("color",new f(r,3)),t.setAttribute("size",new f(o,1));const c=new y({size:.8,vertexColors:!0,transparent:!0,opacity:.8,blending:a,sizeAttenuation:!0,map:ue()}),l=new v(t,c);return l.userData={type:"starField",isStatic:!0},e.add(l),console.log("âœ… æ˜Ÿç©ºä½œæˆå®Œäº†: 1ã¤ã®Pointsã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ",n,"å€‹ã®æ˜Ÿã‚’å«ã‚€ï¼‰+ 1ã¤ã®ãƒ†ã‚¯ã‚¹ãƒãƒ£"),l},ue=()=>{const e=document.createElement("canvas");e.width=32,e.height=32;const t=e.getContext("2d"),n=t.createRadialGradient(16,16,0,16,16,16);n.addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(.2,"rgba(255,255,255,0.8)"),n.addColorStop(.4,"rgba(255,255,255,0.4)"),n.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=n,t.fillRect(0,0,32,32);const s=new S(e);return s.flipY=!1,s.premultiplyAlpha=!1,s},he=e=>{const t=new w(16777215,.8);t.userData={type:"ambientLight",isStatic:!0},e.add(t);const n=new x(16777215,.6);n.position.set(5,5,5),n.userData={type:"directionalLight",isStatic:!0},e.add(n);const s=new x(16777215,.3);return s.position.set(-5,3,5),s.userData={type:"directionalLight",isStatic:!0},e.add(s),{ambientLight:t,directionalLight:n,directionalLight2:s}},de=(e,t,n)=>{const s=t.filter((e=>e.completed)),r=[];console.log("ğŸ”® å®Œäº†æ¸ˆã¿çƒä½“ä½œæˆé–‹å§‹: çƒä½“æ•° =",s.length);let o=0,a=0,c=0,l=0;const u=ae.precomputeSpiralPositions(s.length);return s.forEach(((t,h)=>{const m=h/Math.max(s.length-1,1),f=new d(.2+.1*m,0);a++;const y=re(t.id,t.category),v=ae.getMaterial("completed_sphere",y);c++;const w=new p(f,v);o++;const x=u[h];w.position.set(x.x,x.y,x.z),w.scale.setScalar(x.scale),w.userData={experience:t,type:"completed",originalScale:x.scale,glowColor:new i(y),seed:t.id||h,spiralIndex:h,depth:x.z};const D=new g(new i(y),.8,3);D.position.copy(w.position),D.userData={type:"sphereLight",parentType:"completed",isStatic:!0},w.userData.light=D,e.add(D),l++,e.add(w),r.push(w),n.current.push(w)})),console.log("âœ… å®Œäº†æ¸ˆã¿çƒä½“ä½œæˆå®Œäº†:",{"çƒä½“æ•°":s.length,"ãƒ¡ãƒƒã‚·ãƒ¥":o,"ã‚¸ã‚ªãƒ¡ãƒˆãƒª":a,"ãƒãƒ†ãƒªã‚¢ãƒ«":c,"ãƒ©ã‚¤ãƒˆ":l,"ç·ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ•°":o+l}),r},pe=(e,t,n,s=[])=>{const r=t.filter((e=>!e.completed));console.log("ğŸš€ æµ®éŠãƒŸãƒƒã‚·ãƒ§ãƒ³ä½œæˆé–‹å§‹: ãƒŸãƒƒã‚·ãƒ§ãƒ³æ•° =",r.length);let o=0,a=0,c=0,l=0,u=0;const h=s.map((e=>e.position)),m=ae.precomputeFloatingPositions(r.length,h);r.forEach(((t,s)=>{const r=new d(.2,0);a++;const h=re(t.id,t.category),f=ae.getMaterial("floating_mission",h);c++;const y=new p(r,f);o++;const v=m[s];y.position.set(v.x,v.y,v.z),y.userData={experience:t,type:"floating",index:s,seed:v.seed,basePosition:y.position.clone(),positionFixed:!0},e.add(y),n.current.push(y);const w=new g(new i(h),.6,2.5);w.position.copy(y.position),w.userData={type:"missionLight",parentType:"floating",isStatic:!0},y.userData.light=w,e.add(w),l++;const x=ge(e,y,h,v.seed);u+=x})),console.log("âœ… æµ®éŠãƒŸãƒƒã‚·ãƒ§ãƒ³ä½œæˆå®Œäº†:",{"ãƒŸãƒƒã‚·ãƒ§ãƒ³æ•°":r.length,"ãƒ¡ãƒƒã‚·ãƒ¥":o,"ã‚¸ã‚ªãƒ¡ãƒˆãƒª":a,"ãƒãƒ†ãƒªã‚¢ãƒ«":c,"ãƒ©ã‚¤ãƒˆ":l,"ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«":u,"ç·ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ•°":o+l+u})},ge=(e,t,n,s)=>{const r=ae.geometryPool.particle_tiny,o=ae.getMaterial("particle",n,{opacity:.4});let i=0;for(let a=0;a<5;a++){const n=new p(r,o);n.position.copy(t.position);const c=.8*ae.seededRandom(5.678*s+a)-.4,l=.8*ae.seededRandom(6.789*s+a)-.4,h=.8*ae.seededRandom(7.89*s+a)-.4;n.position.add(new u(c,l,h)),n.userData={type:"missionParticle",parentMission:t,offset:new u(c,l,h),speed:.001+.002*ae.seededRandom(8.901*s+a),isParticle:!0,isStatic:!0},e.add(n),i++}return i},me=(e,t)=>{if(t.length<2)return;console.log("ğŸ§µ æ¥ç¶šç³¸ä½œæˆé–‹å§‹: çƒä½“æ•° =",t.length,"æ¥ç¶šæ•° =",t.length-1);let n=0,s=0,r=0;for(let o=0;o<t.length-1;o++){const i=t[o].position,a=t[o+1].position,c=t[o].userData.experience.id+t[o+1].userData.experience.id,l=ae.getConnectionCurve(i,a,c);n+=fe(e,l,t[o],t[o+1]);const u=ye(e,l,t[o],t[o+1]);s+=u.particles,r+=u.lights}console.log("âœ… æ¥ç¶šç³¸ä½œæˆå®Œäº†:",{"æ¥ç¶šæ•°":t.length-1,"ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ":n,"ç³¸ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«":s,"ç³¸ãƒ©ã‚¤ãƒˆ":r,"ç·ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ•°":n+s+r})},fe=(e,t,n,s)=>{const{points:r}=t;let o=0;const a=ae.geometryPool.cylinder_thread;for(let l=0;l<r.length-1;l++){const t=r[l],h=r[l+1],d=(new u).subVectors(h,t),g=d.length();d.normalize();const m=l/(r.length-1),f=n.material.color,y=s.material.color,v=(new i).lerpColors(f,y,m),w=new c({color:v,transparent:!0,opacity:.95,emissive:v,emissiveIntensity:.6,shininess:150,specular:new i(16777215).multiplyScalar(.5)}),x=new p(a,w);x.scale.set(1,g,1);const S=(new u).addVectors(t,h).multiplyScalar(.5);x.position.copy(S);const M=new D;M.setFromUnitVectors(new u(0,1,0),d),x.quaternion.copy(M),x.userData={type:"connectionThread",isConnectionThread:!0,isStatic:!0},e.add(x),o++}return o},ye=(e,t,n,s)=>{const{curve:r,distance:c}=t,l=Math.max(5,Math.floor(3*c));let u=0,h=0;const d=ae.geometryPool.particle_small;for(let m=0;m<l;m++){const t=m/l,c=r.getPoint(t),f=(new i).lerpColors(new i(re(n.userData.experience.id)),new i(re(s.userData.experience.id)),t),y=new o({color:f,transparent:!0,opacity:.9,blending:a}),v=new p(d,y);v.position.copy(c);const w=new g(f,.3,1.5);w.position.copy(c),w.userData={type:"threadParticleLight",parentType:"threadParticle",isStatic:!0},e.add(w),h++,v.userData={type:"threadParticle",isThreadParticle:!0,baseOpacity:.9,phase:m/l*Math.PI*2,isStatic:!0,light:w},e.add(v),u++}return{particles:u,lights:h}},ve=e=>{const t=performance.now(),n=e.filter((e=>e.completed)).length,s=e.filter((e=>!e.completed)).length,r=Math.max(0,n-1),o=2*n,i=7*s,a=Math.max(5,Math.floor(6)),c=r*(30+2*a),l=1+o+i+c;console.log("ğŸ” ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æãƒ¬ãƒãƒ¼ãƒˆ"),console.log("=========================================="),console.log("ğŸ“Š Experience ãƒ‡ãƒ¼ã‚¿:"),console.log("  - ç·Experienceæ•°:",e.length),console.log("  - å®Œäº†æ¸ˆã¿:",n),console.log("  - æœªå®Œäº†:",s),console.log("  - æ¥ç¶šæ•°:",r),console.log(""),console.log("ğŸ¯ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…è¨³:"),console.log("  â­ æ˜Ÿç©º:",1,"ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (",1500,"å€‹ã®æ˜Ÿç‚¹ã‚’å«ã‚€)"),console.log("  ğŸ”® å®Œäº†æ¸ˆã¿çƒä½“:",n,"å€‹ Ã—2 =",o,"ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ"),console.log("  ğŸš€ æµ®éŠãƒŸãƒƒã‚·ãƒ§ãƒ³:",s,"å€‹ Ã—7 =",i,"ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ"),console.log("  ğŸ§µ æ¥ç¶šç³¸:",r,"æœ¬ Ã— ~",30+2*a,"=",c,"ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ"),console.log(""),console.log("ğŸ“ˆ ç·æ¨å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ•°:",l),console.log("âœ… å·®åˆ†æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æ¸ˆã¿");const u=performance.now();return console.log("â±ï¸ åˆ†ææ™‚é–“:",(u-t).toFixed(2),"ms"),console.log("=========================================="),l},we=t=>{const n=e.useRef(null),s=e.useRef(null),r=e.useRef(null),o=e.useRef(null),i=e.useRef([]),a=e.useRef(null),c=e.useRef(null),l=e.useRef([]),{startOptimizedAnimation:u,disposeOptimizedAnimation:h}=(()=>{const e=new ce,t=e=>{e&&(e.rotation.y+=1e-4,e.rotation.x+=5e-5)},n=(e,t,n)=>{const r=.001*n;t.current||e.current.forEach((e=>{if("completed"===e.userData.type||"floating"===e.userData.type){const t=e.userData.originalScale||1;e.scale.setScalar(t),e.material&&void 0!==e.material.emissiveIntensity&&(e.material.emissiveIntensity=.3)}})),e.current.forEach((e=>{if("completed"===e.userData.type){const s=e.userData.originalScale||1;if(e===t.current&&e.userData.hoverStartTime){const t=.005*(n-e.userData.hoverStartTime),r=s*(1.3+.2*Math.sin(3*t));e.scale.setScalar(r),e.rotation.y+=.02,e.rotation.x+=.01;const o=.6+.2*Math.sin(4*t);e.material.emissiveIntensity=o,e.userData.light&&(e.userData.light.intensity=.8+.2*Math.sin(4*t))}else{const t=s*(1+.05*Math.sin(2*r));e.scale.setScalar(t);const n=.3+.1*Math.sin(3*r);e.material.emissiveIntensity=n,e.userData.light&&(e.userData.light.intensity=.5+.1*Math.sin(3*r))}}else"floating"===e.userData.type&&s(e,t,n)}))},s=(e,t,n)=>{const s=8e-4*n,r=e===t.current,o=.008+e.userData.index%4*.003;if(e.rotation.x+=o,e.rotation.y+=.7*o,e.rotation.z+=.4*o,r?(e.userData.hoverStartTime||(e.userData.hoverStartTime=n,e.userData.isHovering=!0),e.userData.hoverEndTime=null):e.userData.isHovering&&(e.userData.hoverEndTime?n-e.userData.hoverEndTime>150&&(e.userData.hoverStartTime=null,e.userData.hoverEndTime=null,e.userData.isHovering=!1):e.userData.hoverEndTime=n),e.userData.isHovering&&e.userData.hoverStartTime){const t=.008*(n-e.userData.hoverStartTime),s=1.5+.3*Math.sin(4*t);e.scale.setScalar(s),e.rotation.x+=.05,e.rotation.y+=.04,e.rotation.z+=.06,void 0!==e.material.emissiveIntensity&&(e.material.emissiveIntensity=.8+.2*Math.sin(4*t))}else{const t=1+.2*Math.sin(2*s+2*e.userData.index);e.scale.setScalar(t),void 0!==e.material.emissiveIntensity&&(e.material.emissiveIntensity=.3+.2*Math.sin(4*s+e.userData.index))}},r=(e,t)=>{const n=.001*t;e.traverse((e=>{if(e.userData.parentMission&&e.userData.isParticle){const t=n*e.userData.speed*.8;e.material&&(e.material.opacity=.2+.2*Math.sin(3*t));const s=1+.1*Math.sin(2*t);e.scale.setScalar(s)}if(e.userData.isThreadParticle&&void 0!==e.userData.baseOpacity&&e.material){const t=e.userData.phase||0;e.material.opacity=Math.max(.1,e.userData.baseOpacity+.2*Math.sin(2*n+t))}if(e.userData.isSparkle){e.rotation.x+=.02,e.rotation.y+=.01,e.rotation.z+=.015,e.material&&(e.material.opacity=.3+.3*Math.sin(5*n+e.userData.phase));const t=1+.2*Math.sin(3*n+e.userData.phase);e.scale.setScalar(t)}}))};return{animateStars:t,animateSpheres:n,animateSceneParticles:r,startOptimizedAnimation:(s,o,i,a,c,l)=>{const u=e=>{t(o),n(i,a,e),r(s,e),c&&l&&s&&c.render(s,l)};return e.addCallback(u),e.start(),()=>{e.removeCallback(u),e.stop()}},disposeOptimizedAnimation:()=>{e.dispose()},animationManager:e}})(),d=(e=n.current)=>{if(!e)return;const t=[],s={};e.traverse((n=>{var r;const o=(null==(r=n.userData)?void 0:r.type)||n.type||"unknown",i=n.constructor.name;if(!(n instanceof M||n.isBackground||n.userData&&"completed"===n.userData.type||n.userData&&"starField"===n.userData.type||n.userData&&"ambientLight"===n.userData.type||n.userData&&"directionalLight"===n.userData.type)&&n!==e){const e=`${i}(${o})`;s[e]=(s[e]||0)+1,t.push(n)}})),console.log("ğŸ—‘ï¸ å‰Šé™¤å¯¾è±¡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°:"),Object.entries(s).forEach((([e,t])=>{console.log(`  - ${e}: ${t}å€‹`)})),console.log(`ğŸ§¹ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—: ${t.length}å€‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å‰Šé™¤`),t.forEach((t=>{var n,s;e.remove(t),t.geometry&&!(null==(n=t.userData)?void 0:n.isPooled)&&t.geometry.dispose(),t.material&&!(null==(s=t.userData)?void 0:s.isPooled)&&(Array.isArray(t.material)?t.material.forEach((e=>e.dispose())):t.material.dispose())}))};return{sceneRef:n,cameraRef:s,rendererRef:r,raycasterRef:o,meshesRef:i,hoveredMeshRef:a,initializeScene:(e,a=null,c=!1)=>{const u=e.getBoundingClientRect(),h=new b,p=new P(75,u.width/u.height,.1,1e3),g=new C({canvas:e,alpha:!0,antialias:window.devicePixelRatio<=1,powerPreference:"high-performance"});if(g.outputColorSpace="srgb",T.enabled=!0,n.current=h,s.current=p,r.current=g,o.current=new R,o.current.params.Points.threshold=.5,g.setSize(u.width,u.height),g.setClearColor(0,0),g.setPixelRatio(Math.min(window.devicePixelRatio,2)),g.shadowMap.enabled=!1,p.position.set(0,0,5),p.lookAt(0,0,0),console.log("ğŸ” ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—åˆ¤å®š:",{forceCleanup:c,"ã‚·ãƒ¼ãƒ³å­˜åœ¨":!!h,"ã‚·ãƒ¼ãƒ³å­è¦ç´ æ•°":h.children.length}),c?(i.current=[],d(h),console.log("ğŸ§¹ å¼·åˆ¶ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Ÿè¡Œ - å…¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‰Šé™¤")):console.log("ğŸ”„ å·®åˆ†æ›´æ–°ãƒ¢ãƒ¼ãƒ‰ - æ—¢å­˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä¿æŒ"),a&&!0===a.isServerData){console.log("ğŸ”§ ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰è¨ˆç®—çµæœã‚’ä½¿ç”¨ã—ã¾ã™",a);const e=le(h);he(h);const n=de(h,t,i);return me(h,n),pe(h,t,i,n),ve(t),l.current=[...t],{scene:h,renderer:g,camera:p,stars:e,meshesRef:i,hoveredMeshRef:{current:null},initComplete:!0}}{console.log("ğŸ’» ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã™");const e=le(h);he(h);const n=de(h,t,i);return me(h,n),pe(h,t,i,n),ve(t),l.current=[...t],{scene:h,camera:p,renderer:g,stars:e}}},startAnimation:e=>{c.current&&c.current();const t=u(n.current,e,i,a,r.current,s.current);return c.current=t,t},handleResize:e=>{const t=e.getBoundingClientRect();s.current&&r.current&&(s.current.aspect=t.width/t.height,s.current.updateProjectionMatrix(),r.current.setSize(t.width,t.height))},cleanup:()=>{c.current&&(c.current(),c.current=null),d(),r.current&&(r.current.dispose(),r.current=null),h(),ae.dispose(),n.current=null,s.current=null,o.current=null,i.current=[],a.current=null},getInteractableMeshes:()=>i.current.filter((e=>"completed"===e.userData.type||"floating"===e.userData.type)),setOptimizedHoveredMesh:e=>{a.current&&a.current!==e&&(a.current.userData.hoverStartTime=null,a.current.userData.isHovering=!1),a.current=e,e&&(e.userData.hoverStartTime=Date.now(),e.userData.isHovering=!0)},cleanupOptimizedScene:d,updateSceneDifferentially:e=>{console.log("ğŸ”„ å·®åˆ†æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ é–‹å§‹");const t=l.current,s=e.filter((e=>!t.find((t=>t.id===e.id)))),r=e.filter((e=>e.completed&&!t.find((t=>t.id===e.id&&t.completed))));if(console.log("ğŸ“Š å·®åˆ†åˆ†æ:",{"æ–°è¦ä½“é¨“":s.length,"æ–°è¦å®Œäº†":r.length,"æ—¢å­˜ä¿æŒ":t.length}),0===s.length&&0===r.length)return console.log("ğŸ¯ å¤‰æ›´ãªã— - ã‚¹ã‚­ãƒƒãƒ—"),!1;const o=n.current;if(!o)return!1;if(r.length>0){const e=de(o,r,i);console.log("âœ… æ–°ã—ã„å®Œäº†æ¸ˆã¿çƒä½“ã‚’è¿½åŠ :",e.length)}const a=s.filter((e=>!e.completed));if(a.length>0){const e=i.current.filter((e=>"completed"===e.userData.type));pe(o,a,i,e),console.log("ğŸš€ æ–°ã—ã„æµ®éŠãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’è¿½åŠ :",a.length)}if(r.length>0){((e,t,n)=>{console.log("ğŸ§µ æ¥ç¶šç³¸ã®éƒ¨åˆ†æ›´æ–°é–‹å§‹");let s=0,r=0;t.forEach((t=>{if(n.length>0){const o=n.reduce(((e,n)=>t.position.distanceTo(n.position)<t.position.distanceTo(e.position)?n:e)),i=t.userData.experience.id+o.userData.experience.id,a=ae.getConnectionCurve(t.position,o.position,i),c=fe(e,a,t,o),l=ye(e,a,t,o);s++,r+=c+l.particles+l.lights}})),console.log("âœ… æ¥ç¶šç³¸éƒ¨åˆ†æ›´æ–°å®Œäº†:",{"æ–°è¦æ¥ç¶šæ•°":s,"è¿½åŠ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ":r})})(o,i.current.filter((e=>"completed"===e.userData.type&&r.find((t=>t.id===e.userData.experience.id)))),i.current.filter((e=>"completed"===e.userData.type&&!r.find((t=>t.id===e.userData.experience.id))))),console.log("ğŸ§µ æ¥ç¶šç³¸ã®éƒ¨åˆ†æ›´æ–°å®Œäº† - æ–°è¦æ¥ç¶šã®ã¿è¿½åŠ ")}return l.current=[...e],!0}}},xe=({experiences:s=[],onExperienceClick:r})=>{const o=e.useRef(null),i=e.useRef(null),a=e.useRef(new k),[c,l]=e.useState(!1),h=e.useRef(!1),d=e.useRef({x:0,y:0}),{visualizationData:p,isLoading:g,useServerData:m}=(t=>{const[n,s]=e.useState(null),[r,o]=e.useState(!1),[i,a]=e.useState(!1),[c,l]=e.useState(null),u=e.useCallback((e=>{if(!e||0===e.length)return console.log("âš ï¸ ä½“é¨“ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"),null;console.log("ğŸ” å—ä¿¡ã—ãŸä½“é¨“ãƒ‡ãƒ¼ã‚¿:",e);const t=e.filter((e=>e.isCompleted||e.completed)),n=e.filter((e=>!e.isCompleted&&!e.completed));return console.log("ğŸ“Š ä½“é¨“ãƒ‡ãƒ¼ã‚¿åˆ†æ:",{totalExperiences:e.length,completedExperiences:t.length,incompleteExperiences:n.length,sampleExperience:e[0]?{id:e[0].id,isCompleted:e[0].isCompleted,completed:e[0].completed,title:e[0].title}:null}),{spheres:t.map(((e,t)=>({id:e.id||t,position:{x:0,y:0,z:0},color:e.color||"#4FC3F7",scale:1,experience:e,type:"completed"}))),floatingMissions:n.slice(0,5).map(((e,t)=>({id:e.id||`floating_${t}`,position:{x:0,y:0,z:0},color:e.color||"#81C784",scale:.8,experience:e,type:"floating"}))),connections:t.length>1?t.slice(0,-1).map(((e,t)=>({from:t,to:t+1,strength:.8,color:"#FFFFFF"}))):[],stars:{count:200,distribution:"optimized"},lighting:{ambient:.4,directional:.6},isServerData:!1,generatedAt:(new Date).toISOString()}}),[]),h=e.useCallback((async e=>{try{o(!0),l(null);const t=await fetch("/api/visualization/experience-strings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Server responded with ${t.status}: ${t.statusText}`);const n=await t.json();if(n&&"success"===n.status){const e={...n.data,isServerData:!0};return s(e),a(!0),console.log("âœ… ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã—ãŸ"),e}throw new Error("Server returned invalid data structure")}catch(t){console.warn("âš ï¸ ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³å–å¾—ã«å¤±æ•—:",t.message),l(t.message);const n=u(e);return s(n),a(!1),console.log("ğŸ”„ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™"),n}finally{o(!1)}}),[u]);return e.useEffect((()=>{if(!t||0===t.length)return void s(null);let e=!0;return(async()=>{try{const n=await h(t);e&&s(n)}catch(n){if(console.error("ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:",n),e){const e=u(t);s(e),a(!1)}}})(),()=>{e=!1}}),[t,h,u]),{visualizationData:n,isLoading:r,useServerData:i,serverError:c,retryServerData:e.useCallback((async()=>{t&&t.length>0&&await h(t)}),[t,h]),forceUseFrontendData:e.useCallback((()=>{const e=u(t);s(e),a(!1),l(null),console.log("ğŸ”„ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ¼ã‚¿ã«å¼·åˆ¶åˆ‡ã‚Šæ›¿ãˆã—ã¾ã—ãŸ")}),[t,u])}})(s),f=e.useRef({isTouch:!1,isDragging:!1,isPinching:!1,lastTouch:{x:0,y:0},lastDistance:0,touches:[],tapStartTime:0,tapStartPos:{x:0,y:0},isTap:!1}),{cameraRef:y,raycasterRef:v,initializeScene:w,startAnimation:x,handleResize:D,cleanup:S,getInteractableMeshes:M,sceneRef:b,updateSceneDifferentially:P}=we(s),C=e.useCallback((e=>{c&&o.current&&(console.log("ğŸ–±ï¸ ã‚¯ãƒªãƒƒã‚¯å‡¦ç†é–‹å§‹"),requestIdleCallback((()=>{var t,n,s;const i=o.current.getBoundingClientRect(),c=e.clientX-i.left,l=e.clientY-i.top;a.current.x=c/i.width*2-1,a.current.y=-l/i.height*2+1;const u=M();if(console.log("ğŸ“‹ ã‚¯ãƒªãƒƒã‚¯å¯èƒ½ãªãƒ¡ãƒƒã‚·ãƒ¥æ•°:",u.length),v.current&&y.current&&u.length>0){v.current.setFromCamera(a.current,y.current);const e=v.current.intersectObjects(u);if(console.log("ğŸ¯ ãƒ¬ã‚¤ã‚­ãƒ£ã‚¹ãƒˆçµæœ:",e.length,"ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒãƒ’ãƒƒãƒˆ"),e.length>0){const o=e[0].object.userData;console.log("ğŸ“¦ ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ:",{type:o.type,experienceId:null==(t=o.experience)?void 0:t.id,experienceTitle:null==(n=o.experience)?void 0:n.title,isCompleted:null==(s=o.experience)?void 0:s.completed}),"floating"===o.type?(console.log("ğŸˆ æµ®éŠãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚¯ãƒªãƒƒã‚¯ - è©³ç´°è¡¨ç¤ºã®ã¿å®Ÿè¡Œ"),o.experience&&r&&r(o.experience)):o.experience&&r&&(console.log("âšª å®Œäº†æ¸ˆã¿çƒä½“ã‚¯ãƒªãƒƒã‚¯ - è©³ç´°è¡¨ç¤ºå®Ÿè¡Œ"),r(o.experience))}else console.log("âŒ ã‚¯ãƒªãƒƒã‚¯å¯¾è±¡ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ")}})))}),[c,M,r,y,v]),T=e.useCallback((e=>{if(!c||!y.current)return;e.preventDefault();const t=new u;y.current.getWorldDirection(t);const n=new u(0,0,0),s=.05*e.deltaY;let r=y.current.position.distanceTo(n)+s;r=Math.max(2,Math.min(30,r)),y.current.position.copy(n.clone().add(t.multiplyScalar(-r))),y.current.lookAt(n)}),[c,y]),R=e.useCallback((e=>{f.current.isTouch||(h.current=!0,d.current={x:e.clientX,y:e.clientY})}),[]),E=e.useCallback((()=>{f.current.isTouch||(h.current=!1)}),[]),L=e.useCallback((e=>{if(!h.current||!y.current||f.current.isTouch)return;const t=e.clientX-d.current.x,n=e.clientY-d.current.y;y.current.position.x-=.01*t,y.current.position.y+=.01*n,y.current.lookAt(0,0,0),d.current={x:e.clientX,y:e.clientY}}),[y]),z=e.useCallback((e=>{if(e.preventDefault(),f.current.isTouch=!0,1===e.touches.length){const t=e.touches[0];f.current.tapStartTime=Date.now(),f.current.tapStartPos={x:t.clientX,y:t.clientY},f.current.lastTouch={x:t.clientX,y:t.clientY},f.current.isTap=!0,f.current.isDragging=!1}else if(2===e.touches.length){f.current.isPinching=!0,f.current.isDragging=!1,f.current.isTap=!1;const t=e.touches[0].clientX-e.touches[1].clientX,n=e.touches[0].clientY-e.touches[1].clientY;f.current.lastDistance=Math.sqrt(t*t+n*n)}f.current.touches=Array.from(e.touches)}),[]),F=e.useCallback((e=>{if(e.preventDefault(),y.current){if(1===e.touches.length&&f.current.isTap){const t=e.touches[0],n=Math.abs(t.clientX-f.current.tapStartPos.x),s=Math.abs(t.clientY-f.current.tapStartPos.y);Math.sqrt(n*n+s*s)>10&&(f.current.isTap=!1,f.current.isDragging=!0)}if(1===e.touches.length&&f.current.isDragging&&!f.current.isTap){const t=e.touches[0],n=t.clientX-f.current.lastTouch.x,s=t.clientY-f.current.lastTouch.y,r=.015;y.current.position.x-=n*r,y.current.position.y+=s*r,y.current.lookAt(0,0,0),f.current.lastTouch={x:t.clientX,y:t.clientY}}else if(2===e.touches.length&&f.current.isPinching){const t=e.touches[0].clientX-e.touches[1].clientX,n=e.touches[0].clientY-e.touches[1].clientY,s=Math.sqrt(t*t+n*n);if(f.current.lastDistance>0){const e=s-f.current.lastDistance,t=.01,n=y.current,r=n.position.length(),o=Math.max(5,Math.min(50,r-e*t)),i=n.position.clone().normalize();n.position.copy(i.multiplyScalar(o)),n.lookAt(0,0,0)}f.current.lastDistance=s}}}),[y]),I=e.useCallback((e=>{var t,n,s;if(e.preventDefault(),f.current.isTap&&c&&o.current){if(Date.now()-f.current.tapStartTime<300){console.log("ğŸ“± ã‚¿ãƒƒãƒã‚¿ãƒƒãƒ—å‡¦ç†é–‹å§‹");const e=o.current.getBoundingClientRect(),i=f.current.tapStartPos.x-e.left,c=f.current.tapStartPos.y-e.top;a.current.x=i/e.width*2-1,a.current.y=-c/e.height*2+1;const l=M();if(console.log("ğŸ“‹ ã‚¿ãƒƒãƒ—å¯èƒ½ãªãƒ¡ãƒƒã‚·ãƒ¥æ•°:",l.length),v.current&&y.current&&l.length>0){v.current.setFromCamera(a.current,y.current);const e=v.current.intersectObjects(l);if(console.log("ğŸ¯ ã‚¿ãƒƒãƒ—ãƒ¬ã‚¤ã‚­ãƒ£ã‚¹ãƒˆçµæœ:",e.length,"ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒãƒ’ãƒƒãƒˆ"),e.length>0){const o=e[0].object.userData;console.log("ğŸ“¦ ã‚¿ãƒƒãƒ—ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ:",{type:o.type,experienceId:null==(t=o.experience)?void 0:t.id,experienceTitle:null==(n=o.experience)?void 0:n.title,isCompleted:null==(s=o.experience)?void 0:s.completed}),o.experience&&r&&("floating"===o.type?console.log("ğŸˆ æµ®éŠãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚¿ãƒƒãƒ— - è©³ç´°è¡¨ç¤ºã®ã¿å®Ÿè¡Œ"):console.log("âšª å®Œäº†æ¸ˆã¿çƒä½“ã‚¿ãƒƒãƒ— - è©³ç´°è¡¨ç¤ºå®Ÿè¡Œ"),r(o.experience))}else console.log("âŒ ã‚¿ãƒƒãƒ—å¯¾è±¡ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ")}}}0===e.touches.length?(f.current.isTouch=!1,f.current.isDragging=!1,f.current.isPinching=!1,f.current.isTap=!1,f.current.lastDistance=0,f.current.tapStartTime=0):1===e.touches.length&&f.current.isPinching&&(f.current.isPinching=!1,f.current.isDragging=!0,f.current.isTap=!1,f.current.lastTouch={x:e.touches[0].clientX,y:e.touches[0].clientY}),f.current.touches=Array.from(e.touches)}),[c,M,r,y,v]);e.useEffect((()=>{if(!o.current||0===s.length)return;if(c&&b.current)return void console.log("ğŸš€ ã‚·ãƒ¼ãƒ³ã¯æ—¢ã«åˆæœŸåŒ–æ¸ˆã¿ - åˆæœŸåŒ–ã‚¹ã‚­ãƒƒãƒ—ï¼ˆå·®åˆ†æ›´æ–°ã¯åˆ¥ã®useEffectã§å‡¦ç†ï¼‰");if(g)return void console.log("ğŸ”„ ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ä¸­...");const e=o.current;let t=null;try{m&&p?console.log("ğŸ–¥ï¸ ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨:",p):console.log("ğŸ’» ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨ˆç®—ã§ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ");const n=!c;console.log("ğŸ¯ åˆæœŸåŒ–ãƒ¢ãƒ¼ãƒ‰åˆ†æ:",{isInitialized:c,forceCleanup:n,experiencesLength:s.length,"ã‚·ãƒ¼ãƒ³å‚ç…§å­˜åœ¨":!!b.current});const{stars:r}=w(e,p,n);t=x(r),l(!0),console.log("âœ… 3Dãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«åˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ");const o=()=>D(e);return window.addEventListener("resize",o),e.addEventListener("wheel",T,{passive:!1}),e.addEventListener("click",C),e.addEventListener("mousedown",R),e.addEventListener("mouseup",E),e.addEventListener("mouseleave",E),e.addEventListener("mousemove",L),e.addEventListener("touchstart",z,{passive:!1}),e.addEventListener("touchmove",F,{passive:!1}),e.addEventListener("touchend",I,{passive:!1}),e.addEventListener("touchcancel",I,{passive:!1}),()=>{l(!1),t&&t(),window.removeEventListener("resize",o),e.removeEventListener("wheel",T),e.removeEventListener("click",C),e.removeEventListener("mousedown",R),e.removeEventListener("mouseup",E),e.removeEventListener("mouseleave",E),e.removeEventListener("mousemove",L),e.removeEventListener("touchstart",z),e.removeEventListener("touchmove",F),e.removeEventListener("touchend",I),e.removeEventListener("touchcancel",I),S()}}catch(n){console.error("æœ€é©åŒ–ã•ã‚ŒãŸã‚·ãƒ¼ãƒ³ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ:",n),l(!1)}}),[p,g,m,s.length]),e.useEffect((()=>{if(!c||!o.current||0===s.length)return;console.log("ğŸ”„ å·®åˆ†æ›´æ–°ãƒã‚§ãƒƒã‚¯ - experiencesã®å†…å®¹å¤‰æ›´ã‚’æ¤œå‡º");P(s)&&console.log("âœ… å·®åˆ†æ›´æ–°å®Œäº† - æ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã¿è¿½åŠ ")}),[s,c,P]);const j=t.useMemo((()=>({completed:s.filter((e=>e.completed)).length,floating:s.filter((e=>!e.completed)).length})),[s]);return n.jsx("div",{className:"px-4 bg-black",ref:i,children:n.jsxs("div",{className:"relative mb-8 bg-black rounded-3xl shadow-2xl overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-black"}),n.jsx("canvas",{ref:o,className:"w-full h-96 cursor-crosshair relative z-10 bg-black",style:{background:"#000"}}),"        ",n.jsxs("div",{className:"absolute bottom-4 left-4 text-white/80 text-sm z-10",children:[n.jsxs("p",{className:"mb-1",children:["ğŸ¯ ä½“é¨“ã®ç³¸: ",j.completed,"æœ¬"]}),n.jsxs("p",{children:["ğŸ’« æµ®éŠãƒŸãƒƒã‚·ãƒ§ãƒ³: ",j.floating,"å€‹"]}),!c&&n.jsx("p",{className:"text-yellow-300",children:"ğŸ”„ æœ€é©åŒ–ä¸­..."}),p&&n.jsx("p",{className:"mt-1 "+(p.isServerData?"text-green-300":"text-orange-300"),children:p.isServerData?"ğŸ”§ ã‚µãƒ¼ãƒãƒ¼è¨ˆç®—ä½¿ç”¨ä¸­":"ğŸ’» ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨ˆç®—ä½¿ç”¨ä¸­"})]}),n.jsxs("div",{className:"absolute bottom-4 right-4 text-white/60 text-xs z-10",children:[n.jsxs("div",{className:"hidden md:block",children:[n.jsx("p",{children:"ãƒã‚¦ã‚¹ãƒ›ã‚¤ãƒ¼ãƒ«: ã‚ºãƒ¼ãƒ "}),n.jsx("p",{children:"ãƒ‰ãƒ©ãƒƒã‚°: è¦–ç‚¹ç§»å‹•"}),n.jsx("p",{children:"ã‚¯ãƒªãƒƒã‚¯: ä½“é¨“ã‚’é¸æŠ"})]}),n.jsxs("div",{className:"md:hidden",children:[n.jsx("p",{children:"ãƒ”ãƒ³ãƒ: ã‚ºãƒ¼ãƒ "}),n.jsx("p",{children:"ãƒ‰ãƒ©ãƒƒã‚°: è¦–ç‚¹ç§»å‹•"}),n.jsx("p",{children:"ã‚¿ãƒƒãƒ—: ä½“é¨“ã‚’é¸æŠ"})]}),"        "]})]})})};export{xe as O,se as g,te as i};
