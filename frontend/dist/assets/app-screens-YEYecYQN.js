import{R as e,r as t,j as s}from"./vendor-react-8DDf6oIR.js";import{O as l,i as a}from"./app-experience-strings-BqK52NS_.js";import{p as r,d as i,e as n,g as o,I as c,f as d,q as x,P as m,b as p,R as h,h as u,r as g,s as b,t as j,D as f,u as N,v,w as y,x as w,y as k,z as C,F as S,E,Z as L,G as O,J as P,K as D,L as T}from"./vendor-icons-CRzGubcW.js";import{a as z}from"./app-services-DZBnoK80.js";const A=e.memo((({exp:e,onExperienceClick:l,onClearMission:a})=>{const n=t.useCallback((()=>{l(e)}),[e,l]),o=t.useCallback((()=>{a(e.id)}),[e.id,a]);return s.jsx("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all duration-300",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsxs("div",{onClick:n,className:"cursor-pointer text-center w-full",children:[s.jsx("div",{className:"font-semibold text-gray-800 mb-1",children:e.title}),s.jsxs("div",{className:"text-sm text-gray-600",children:[e.category," / レベル",e.level]})]}),s.jsxs("button",{onClick:o,className:"group relative bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-2xl font-medium shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-400 to-green-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl pointer-events-none"}),s.jsxs("div",{className:"relative z-10 flex items-center gap-2",children:[s.jsx(r,{className:"w-4 h-4 group-hover:rotate-12 transition-transform duration-300"}),s.jsx("span",{className:"text-sm font-semibold",children:"達成！"}),s.jsx(i,{className:"w-3 h-3 group-hover:scale-125 transition-transform duration-300"})]}),s.jsx("div",{className:"absolute inset-0 bg-white/20 scale-0 group-active:scale-100 rounded-2xl transition-transform duration-150 pointer-events-none"})]})]})})}));A.displayName="MissionItem";const R=({experiences:e,userStats:a,onNavigateToRecommendation:r,onExperienceClick:i,onClearMission:p,onNavigateToJournalEntry:h})=>{const u=t.useMemo((()=>Array.isArray(e)?e:[]),[e]);console.log("HomeScreen userStats:",a),console.log("HomeScreen experiences:",e);const g=t.useMemo((()=>({totalExperiences:u.length,currentStreak:(null==a?void 0:a.currentStreak)||0,diversityScore:(null==a?void 0:a.diversityScore)||0,badges:Array.isArray(null==a?void 0:a.badges)?a.badges:[],...a})),[a,u.length]),{actualTotalExperiences:b,actualCompletedExperiences:j,actualCurrentStreak:f,inProgressMissions:N}=t.useMemo((()=>({actualTotalExperiences:u.length,actualCompletedExperiences:u.filter((e=>e&&e.completed)).length,actualCurrentStreak:g.currentStreak,inProgressMissions:u.filter((e=>!e.completed))})),[u,g.currentStreak]),[v,y]=t.useState(!1);return t.useEffect((()=>{window.scrollTo(0,0)}),[]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 w-full mx-auto overflow-hidden",children:[" ",s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 px-4 py-6",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Seren Paths"}),s.jsx("p",{className:"text-gray-600 text-sm font-bold",children:"新しい自分を発見する旅"})]}),s.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-shrink-0",children:[s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1 flex items-center gap-2 shadow-lg hover:shadow-xl transition-shadow border border-purple-100",children:[s.jsx(n,{className:"w-4 h-4 text-purple-600 flex-shrink-0"}),s.jsxs("span",{className:"text-sm font-medium text-gray-800 whitespace-nowrap",children:[b,"体験"]})]}),s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-3 py-1 flex items-center gap-2 shadow-lg hover:shadow-xl transition-shadow border border-pink-100",children:[s.jsx(o,{className:"w-4 h-4 text-pink-600 flex-shrink-0"}),s.jsxs("span",{className:"text-sm font-medium text-gray-800 whitespace-nowrap",children:[f,"日"]})]})]})]})}),s.jsxs("div",{className:"pt-24 lg:pt-28 pb-8",children:[s.jsx(l,{experiences:u,onExperienceClick:i}),s.jsxs("div",{className:"mt-8 mb-4 max-w-3xl mx-auto",children:[s.jsx("div",{className:"bg-white shadow-lg rounded-2xl p-4 md:p-6 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("h3",{className:"text-lg md:text-xl font-semibold text-blue-900 mr-2",children:"体験の糸について"}),s.jsx("button",{onClick:()=>y((e=>!e)),className:"p-1 rounded-full bg-transparent hover:bg-blue-100 transition-colors","aria-label":"体験の糸についての情報",children:s.jsx(c,{className:"w-5 h-5 text-blue-700"})})]})}),v&&s.jsx("div",{className:"mt-2 bg-gradient-to-r from-blue-50/80 to-indigo-50/80 backdrop-blur-sm rounded-2xl p-4 border border-blue-200/30 text-blue-800 text-sm md:text-base text-center md:text-left",children:"完了した体験は美しい球体として表示され、それらを繋ぐ糸が成長の軌跡を表現します。 各体験には固有の色があり、カテゴリーやテーマによって美しいグラデーションを作り出します。 ホバーやクリックで詳細な情報を確認できます。"})]})]}),s.jsx("div",{className:"pb-6 px-4",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white/70 backdrop-blur-lg rounded-2xl p-4 text-center hover:bg-white/90 transition-colors border border-purple-100",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b}),s.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"総体験数"})]}),s.jsxs("div",{className:"bg-white/70 backdrop-blur-lg rounded-2xl p-4 text-center hover:bg-white/90 transition-colors border border-pink-100",children:[s.jsx("p",{className:"text-2xl font-bold text-pink-600",children:g.badges.length}),s.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"獲得バッジ"})]}),s.jsxs("div",{className:"bg-white/70 backdrop-blur-lg rounded-2xl p-4 text-center hover:bg-white/90 transition-colors border border-blue-100",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:j}),s.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"完了済み"})]})]})}),s.jsx("div",{className:"pb-24 w-full mx-auto px-4",children:s.jsxs("button",{onClick:r,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-2xl py-4 lg:py-5 font-medium shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3 text-base lg:text-lg",children:[s.jsx(d,{className:"w-5 h-5 lg:w-6 lg:h-6"}),"新しいお題を見つける"]})}),"        ",s.jsxs("div",{className:"mt-6 px-4 pb-32",children:[s.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-800",children:"進行中ミッション"}),s.jsx("div",{className:"space-y-3",children:N.map((e=>s.jsx(A,{exp:e,onExperienceClick:i,onClearMission:p},e.id)))}),0===N.length&&s.jsxs("div",{className:"bg-white/60 backdrop-blur rounded-2xl p-8 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🌟"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"すべてのミッション完了！"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"素晴らしい成果です。新しいお題を探してみましょう。"})]})]}),s.jsxs("div",{className:"fixed bottom-20 right-6 z-50 flex flex-col gap-3",children:[s.jsxs("button",{onClick:h,className:"group bg-white/20 backdrop-blur-lg border border-white/30 text-blue-700 px-4 py-3 rounded-full shadow-lg hover:shadow-xl hover:bg-white/30 transform hover:scale-105 transition-all duration-300 flex items-center gap-2",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),s.jsx(x,{className:"w-4 h-4 relative z-10 group-hover:rotate-12 transition-transform duration-300"}),s.jsx("span",{className:"relative z-10 font-medium text-sm whitespace-nowrap",children:"体験記録"}),s.jsx("div",{className:"absolute inset-0 bg-white/20 scale-0 group-active:scale-100 rounded-full transition-transform duration-150"})]}),s.jsxs("button",{onClick:r,className:"group bg-white/20 backdrop-blur-lg border border-white/30 text-purple-700 px-4 py-3 rounded-full shadow-lg hover:shadow-xl hover:bg-white/30 transform hover:scale-105 transition-all duration-300 flex items-center gap-2",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),s.jsx(m,{className:"w-4 h-4 relative z-10 group-hover:rotate-90 transition-transform duration-300"}),s.jsx("span",{className:"relative z-10 font-medium text-sm whitespace-nowrap",children:"新しいお題"}),s.jsx("div",{className:"absolute inset-0 bg-white/20 scale-0 group-active:scale-100 rounded-full transition-transform duration-150"})]})]})]})]})},I=({iconName:e,...t})=>{const l=a[e]||p;return s.jsx(l,{...t})},J=({currentChallenge:e,selectedLevel:l,setSelectedLevel:a,onGenerateChallenge:r,onAcceptChallenge:i,onSkipChallenge:n,onClose:o})=>{const[c,x]=t.useState(!1),[m,p]=t.useState(!0);t.useEffect((()=>{e&&p(!1)}),[e]);t.useEffect((()=>{window.scrollTo(0,0)}),[]);const u=async e=>{x(!0);try{n(e),await r()}finally{setTimeout((()=>{x(!1)}),500)}},g=c||!e&&m;return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 w-full flex items-center justify-center",children:s.jsxs("div",{className:"w-full max-w-lg px-4 sm:px-6",children:[s.jsx("div",{className:"flex justify-between items-center mb-8",children:s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"今日のお題"})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"挑戦レベルを選択"}),s.jsx("div",{className:"flex gap-3",children:[{level:1,emoji:"🌱",name:"プチ"},{level:2,emoji:"🚀",name:"チャレンジ"},{level:3,emoji:"⭐",name:"アドベンチャー"}].map((e=>s.jsx("button",{onClick:()=>a(e.level),disabled:c,className:`flex-1 py-3 px-2 rounded-xl font-medium transition-all ${l===e.level?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-white/60 text-gray-700 hover:bg-white/80"} ${c?"opacity-50 cursor-not-allowed":""}`,children:s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("span",{className:"text-lg",children:e.emoji}),s.jsx("span",{className:"text-xs",children:e.name}),s.jsxs("span",{className:"text-sm",children:["Lv.",e.level]})]})},e.level)))})]}),s.jsx("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl p-6 sm:p-8 shadow-xl min-h-[500px]",children:!g&&e?s.jsxs("div",{className:"animate-fadeIn",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full flex items-center justify-center animate-pulse",children:s.jsx(I,{iconName:e.icon,className:"w-10 h-10 text-purple-600"})})}),s.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-center mb-3 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:e.title}),s.jsxs("div",{className:"flex justify-center gap-3 mb-6",children:[s.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:e.category}),s.jsx("span",{className:"px-3 py-1 bg-pink-100 text-pink-700 rounded-full text-sm",children:e.estimated_time||"時間未定"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-4 mb-6",children:[s.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.description||"新しい体験があなたを待っています。"}),e.encouragement&&s.jsxs("p",{className:"text-sm text-purple-600 mt-2 font-medium",children:["💡 ",e.encouragement]})]}),e.anti_optimization_score&&s.jsx("div",{className:"flex justify-center mb-4",children:s.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 px-4 py-2 rounded-full",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"新発見度: "}),s.jsxs("span",{className:"text-sm font-bold text-purple-600",children:[Math.round(100*e.anti_optimization_score),"%"]})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:i,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-medium shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:[s.jsx(d,{className:"w-5 h-5"}),"挑戦する！"]}),s.jsxs("button",{onClick:async()=>{x(!0);try{await r()}finally{setTimeout((()=>{x(!1)}),500)}},disabled:c,className:"w-full py-3 bg-blue-100 text-blue-700 rounded-xl font-medium hover:bg-blue-200 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(h,{className:"w-4 h-4 "+(c?"animate-spin":"")}),"別のお題を見る"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>u("not_interested"),disabled:c,className:"flex-1 py-2 bg-gray-100 text-gray-600 rounded-xl text-sm hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"興味なし"}),s.jsx("button",{onClick:()=>u("too_difficult"),disabled:c,className:"flex-1 py-2 bg-gray-100 text-gray-600 rounded-xl text-sm hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"今は無理"})]})]})]}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mb-4"}),s.jsx("p",{className:"text-gray-600 text-center",children:"新しいお題を考えています..."}),s.jsx("p",{className:"text-sm text-gray-400 mt-2 text-center",children:"少々お待ちください"})]})})})]})})},M=({userStats:e,onResetOnboarding:l,experiences:a=[]})=>{const[r,i]=t.useState(!1);t.useEffect((()=>{window.scrollTo(0,0)}),[]);const[o,c]=t.useState(!1),[d,x]=t.useState(!1),[m,p]=t.useState({shareData:!1,analytics:!0,personalizedAds:!1}),[h,N]=t.useState({dailyChallenge:!0,achievements:!0,weeklyReport:!1}),[v,y]=t.useState(z.getAutoSaveEnabled()),w=(()=>{var e;if(!a||0===a.length)return null;const t={};a.forEach((e=>{t[e.category]=(t[e.category]||0)+1}));const s=Object.keys(t).length,l=a.length/Math.max(s,1),r=a.length<10?"探索期":a.length<30?"拡大期":a.length<50?"深化期":"統合期";return{totalCategories:s,averagePerCategory:l.toFixed(1),growthStage:r,favoriteCategory:(null==(e=Object.entries(t).sort(((e,t)=>t[1]-e[1]))[0])?void 0:e[0])||"なし"}})(),k=[{name:"初心者探求者",icon:"🌱",condition:a.length>=5,description:"5つの体験を完了"},{name:"体験コレクター",icon:"📦",condition:a.length>=15,description:"15の体験を記録"},{name:"多様性マスター",icon:"🌈",condition:e.diversityScore>=70,description:"多様性スコア70%以上"},{name:"週末冒険家",icon:"🚀",condition:a.filter((e=>2===e.level)).length>=5,description:"レベル2を5回達成"},{name:"アドベンチャラー",icon:"⭐",condition:a.filter((e=>3===e.level)).length>=3,description:"レベル3を3回達成"},{name:"継続の達人",icon:"🔥",condition:e.currentStreak>=7,description:"7日連続で体験"}];k.filter((e=>e.condition));const C=e=>{p((t=>({...t,[e]:!t[e]}))),localStorage.setItem("privacySettings",JSON.stringify({...m,[e]:!m[e]}))},S=e=>{N((t=>({...t,[e]:!t[e]}))),localStorage.setItem("notificationSettings",JSON.stringify({...h,[e]:!h[e]}))};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:[s.jsx("div",{className:"mb-8",children:s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"プロフィール"})}),s.jsxs("div",{className:"bg-white/60 backdrop-blur rounded-3xl p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:"A"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"冒険者A"}),s.jsx("p",{className:"text-gray-600",children:w?`${w.growthStage}の探求者`:"探求を始めて間もない"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.totalExperiences}),s.jsx("p",{className:"text-xs text-gray-600",children:"体験数"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-pink-600",children:[e.diversityScore,"%"]}),s.jsx("p",{className:"text-xs text-gray-600",children:"多様性スコア"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.currentStreak}),s.jsx("p",{className:"text-xs text-gray-600",children:"連続日数"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"探求者バッジ"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:k.map(((e,t)=>s.jsxs("div",{className:"p-3 rounded-xl border-2 transition-all "+(e.condition?"bg-gradient-to-r from-yellow-50 to-orange-50 border-yellow-300":"bg-gray-50 border-gray-200 opacity-50"),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-xl",children:e.icon}),s.jsx("span",{className:"text-sm font-medium "+(e.condition?"text-gray-800":"text-gray-500"),children:e.name})]}),s.jsx("p",{className:"text-xs text-gray-600",children:e.description})]},t)))})]})]}),s.jsxs("div",{className:"bg-white/60 backdrop-blur rounded-2xl overflow-hidden mb-4",children:[s.jsxs("button",{onClick:()=>x(!d),className:"w-full p-4 flex items-center justify-between bg-white/60 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(n,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-800",children:"成長分析"})]}),s.jsx(u,{className:"w-5 h-5 text-gray-400 transition-transform "+(d?"rotate-90":"")})]}),d&&w&&s.jsxs("div",{className:"border-t border-gray-200/50 p-4 space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"成長ステージ"}),s.jsx("span",{className:"text-sm font-medium text-purple-600",children:w.totalCategories})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"カテゴリー平均体験数"}),s.jsx("span",{className:"text-sm font-medium text-purple-600",children:w.averagePerCategory})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"最も探索したカテゴリー"}),s.jsx("span",{className:"text-sm font-medium text-purple-600",children:w.favoriteCategory})]}),s.jsx("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:s.jsxs("p",{className:"text-xs text-purple-700",children:["💡 ","探索期"===w.growthStage&&"様々な体験を試して、自分の興味を見つけましょう！","拡大期"===w.growthStage&&"順調に成長しています！新しいカテゴリーにも挑戦してみましょう。","深化期"===w.growthStage&&"豊富な体験を積んでいます。より深い挑戦に取り組んでみては？","統合期"===w.growthStage&&"素晴らしい成長です！これまでの体験を振り返り、新たな目標を設定しましょう。"]})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white/60 backdrop-blur rounded-2xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>c(!o),className:"w-full p-4 flex items-center justify-between bg-white/60 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(g,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-800",children:"通知設定"})]}),s.jsx(u,{className:"w-5 h-5 text-gray-400 transition-transform "+(o?"rotate-90":"")})]}),o&&s.jsxs("div",{className:"border-t border-gray-200/50 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"毎日のチャレンジ通知"}),s.jsx("button",{onClick:()=>S("dailyChallenge"),className:"w-12 h-6 rounded-full transition-colors relative "+(h.dailyChallenge?"bg-purple-600":"bg-gray-300"),children:s.jsx("div",{className:"absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform "+(h.dailyChallenge?"translate-x-6":"translate-x-0.5")})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"アチーブメント獲得通知"}),s.jsx("button",{onClick:()=>S("achievements"),className:"w-12 h-6 rounded-full transition-colors relative "+(h.achievements?"bg-purple-600":"bg-gray-300"),children:s.jsx("div",{className:"absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform "+(h.achievements?"translate-x-6":"translate-x-0.5")})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"週間レポート"}),s.jsx("button",{onClick:()=>S("weeklyReport"),className:"w-12 h-6 rounded-full transition-colors relative "+(h.weeklyReport?"bg-purple-600":"bg-gray-300"),children:s.jsx("div",{className:"absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform "+(h.weeklyReport?"translate-x-6":"translate-x-0.5")})})]})]})]}),s.jsxs("div",{className:"bg-white/60 backdrop-blur rounded-2xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>i(!r),className:"w-full p-4 flex items-center justify-between bg-white/60 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(b,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-800",children:"プライバシー設定"})]}),s.jsx(u,{className:"w-5 h-5 text-gray-400 transition-transform "+(r?"rotate-90":"")})]}),r&&s.jsxs("div",{className:"border-t border-gray-200/50 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"データの共有"}),s.jsx("button",{onClick:()=>C("shareData"),className:"w-12 h-6 rounded-full transition-colors relative "+(m.shareData?"bg-purple-600":"bg-gray-300"),children:s.jsx("div",{className:"absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform "+(m.shareData?"translate-x-6":"translate-x-0.5")})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"利用状況の分析"}),s.jsx("button",{onClick:()=>C("analytics"),className:"w-12 h-6 rounded-full transition-colors relative "+(m.analytics?"bg-purple-600":"bg-gray-300"),children:s.jsx("div",{className:"absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform "+(m.analytics?"translate-x-6":"translate-x-0.5")})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"パーソナライズド広告"}),s.jsx("button",{onClick:()=>C("personalizedAds"),className:"w-12 h-6 rounded-full transition-colors relative "+(m.personalizedAds?"bg-purple-600":"bg-gray-300"),children:s.jsx("div",{className:"absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform "+(m.personalizedAds?"translate-x-6":"translate-x-0.5")})})]})]})]}),s.jsxs("div",{className:"bg-white/60 backdrop-blur rounded-2xl p-4 space-y-3",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-2",children:"データ管理"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"自動データ保存"}),s.jsx("button",{onClick:()=>{return y(e=!v),void z.setAutoSaveEnabled(e);var e},className:"w-12 h-6 rounded-full transition-colors relative "+(v?"bg-blue-600":"bg-gray-300"),children:s.jsx("div",{className:"absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform "+(v?"translate-x-6":"translate-x-0.5")})})]}),!v&&s.jsx("button",{onClick:async()=>{try{const e=JSON.parse(localStorage.getItem("experiences")||"[]");await z.updatePreferences(e),alert("データ同期が完了しました")}catch(e){alert("同期に失敗しました")}},className:"w-full py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors text-sm",children:"データを手動同期"})]}),s.jsxs("button",{onClick:()=>{confirm("初回アンケートをやり直しますか？現在の設定は失われます。")&&l&&l()},className:"w-full bg-white/60 backdrop-blur rounded-2xl p-4 flex items-center justify-between hover:bg-white/80 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(j,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-800",children:"初回アンケートを再設定"})]}),s.jsx(u,{className:"w-5 h-5 text-gray-400"})]}),s.jsxs("button",{onClick:()=>{const t={experiences:JSON.parse(localStorage.getItem("experiences")||"[]"),preferences:JSON.parse(localStorage.getItem("userPreferences")||"{}"),stats:e,growthAnalysis:w,exportDate:(new Date).toISOString()},s=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),l=URL.createObjectURL(s),a=document.createElement("a");a.href=l,a.download=`seren-paths-data-${(new Date).toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(l)},className:"w-full p-4 flex items-center justify-between bg-white/60 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(f,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-800",children:"データをエクスポート"})]}),s.jsx(u,{className:"w-5 h-5 text-gray-400"})]})]})]})},$=({onComplete:e})=>{var l;const[a,r]=t.useState(0),[i,n]=t.useState({interests:[],challengeLevel:2,avoidCategories:[],timePreference:"weekend",goals:[]});t.useEffect((()=>{window.scrollTo(0,0)}),[a]);const o=[{title:"✨ Seren Pathsへようこそ！",subtitle:"最適化されない日常を始めましょう",type:"welcome"},{title:"どんなことに興味がありますか？",subtitle:"",type:"interests",options:[{id:"art",label:"アート・創作",emoji:"🎨"},{id:"music",label:"音楽・エンタメ",emoji:"🎵"},{id:"food",label:"料理・グルメ",emoji:"🍽️"},{id:"outdoor",label:"自然・アウトドア",emoji:"🌿"},{id:"sports",label:"学習・読書",emoji:"📚"},{id:"social",label:"ソーシャル",emoji:"👥"},{id:"lifestyle",label:"ライフスタイル",emoji:"🏠"}]},{title:"どれくらい挑戦したいですか？",subtitle:"",type:"challengeLevel",options:[{value:1,label:"プチ・ディスカバリー",description:"日常の小さな変化を楽しみたい",emoji:"🌱"},{value:2,label:"ウィークエンド・チャレンジ",description:"休日に新しいことに挑戦したい",emoji:"🚀"},{value:3,label:"アドベンチャー・クエスト",description:"大きな体験にも挑戦してみたい",emoji:"⭐"}]},{title:"避けたい体験はありますか？",subtitle:"",type:"avoidCategories",options:[{id:"crowded",label:"人混みが多い場所",emoji:"👥"},{id:"expensive",label:"お金がかかること",emoji:"💰"},{id:"physical",label:"体力が必要なこと",emoji:"💪"},{id:"time",label:"時間がかかること",emoji:"⏰"},{id:"social",label:"人と話すこと",emoji:"🗣️"},{id:"tech",label:"デジタル・技術系",emoji:"💻"}]},{title:"いつ挑戦することが多いですか？",subtitle:"",type:"timePreference",options:[{value:"weekday",label:"平日の空き時間",emoji:"📅"},{value:"weekend",label:"土日・休日",emoji:"🌈"},{value:"evening",label:"夜寝る前",emoji:"🌙"},{value:"flexible",label:"いつでも大丈夫",emoji:"👍"}]},{title:"この体験で何を得たいですか？",subtitle:"",type:"goals",options:[{id:"discover",label:"新しい自分の発見",emoji:"🔍"},{id:"skills",label:"スキル・知識の習得",emoji:"🎓"},{id:"refresh",label:"リフレッシュ・気分転換",emoji:"🌟"},{id:"social",label:"人とのつながり",emoji:"👨‍👨‍👧‍👦"},{id:"creative",label:"創造性の向上",emoji:"💡"},{id:"confidence",label:"自信をつけたい",emoji:"💪"}]}],c=o[a],x=()=>{if(0===a)return!0;const e=c.type;return"avoidCategories"===e||("interests"===e||"goals"===e?i[e].length>0:void 0!==i[e]&&""!==i[e])},m=()=>{if(a<o.length-1)r(a+1);else{const t={interests:i.interests,challengeLevel:i.challengeLevel,avoidCategories:i.avoidCategories,timePreference:i.timePreference,goals:i.goals,setupCompleted:!0,setupDate:(new Date).toISOString()};localStorage.setItem("userPreferences",JSON.stringify(t)),e(t)}};return 0===a?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-6",children:s.jsxs("div",{className:"max-w-md w-full text-center",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx(d,{className:"w-20 h-20 mx-auto text-purple-600 mb-4"}),s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-3",children:"Seren Paths"}),s.jsx("p",{className:"text-base font-bold text-gray-700 mb-8",children:"新しい自分を発見する旅"}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["普段とは違う体験を通じて",s.jsx("br",{}),"あなたの可能性を広げましょう"]})]}),s.jsxs("button",{onClick:m,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-2xl py-4 font-medium shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:["はじめる",s.jsx(u,{className:"w-5 h-5"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"簡単な質問に答えるだけ（約1分）"})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["質問 ",a," / ",o.length-1]}),s.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(a/(o.length-1)*100),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full transition-all duration-300",style:{width:a/(o.length-1)*100+"%"}})})]}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-3",children:c.title}),s.jsx("p",{className:"text-gray-600",children:c.subtitle})]}),s.jsx("div",{className:"space-y-3 mb-8",children:null==(l=c.options)?void 0:l.map((e=>{var t;const l="challengeLevel"===c.type||"timePreference"===c.type?i[c.type]===e.value:null==(t=i[c.type])?void 0:t.includes(e.id||e.value);return s.jsx("button",{onClick:()=>(e=>{const t=c.type;n("interests"===t||"avoidCategories"===t||"goals"===t?s=>({...s,[t]:s[t].includes(e)?s[t].filter((t=>t!==e)):[...s[t],e]}):s=>({...s,[t]:e}))})(e.id||e.value),className:"w-full p-4 rounded-2xl text-left transition-all duration-300 "+(l?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg scale-105":"bg-white/60 hover:bg-white/80 text-gray-800"),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:e.emoji}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:e.label}),e.description&&s.jsx("div",{className:"text-sm "+(l?"text-white/80":"text-gray-600"),children:e.description})]}),l&&s.jsx("div",{className:"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center",children:"✓"})]})},e.id||e.value)}))}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>{a>0&&r(a-1)},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-300 transition-colors flex items-center gap-2",children:[s.jsx(N,{className:"w-4 h-4"}),"戻る"]}),s.jsxs("button",{onClick:m,disabled:!x(),className:"flex-1 py-3 rounded-xl font-medium transition-all flex items-center justify-center gap-2 "+(x()?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg hover:shadow-xl transform hover:scale-105":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:[a===o.length-1?"完了":"次へ",s.jsx(u,{className:"w-4 h-4"})]})]})]})})},_=({experiences:e,onBack:l})=>{var a,r;const[i,n]=t.useState("all");t.useEffect((()=>{window.scrollTo(0,0)}),[]);const[c,d]=t.useState(!1),[x,m]=t.useState(0);return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center mb-6",children:s.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"ストリングス・ギャラリー"})}),s.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(o,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"表示期間"})]}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{value:"all",label:"すべて"},{value:"week",label:"1週間"},{value:"month",label:"1ヶ月"},{value:"3months",label:"3ヶ月"}].map((e=>s.jsx("button",{onClick:()=>n(e.value),className:"py-2 px-3 rounded-lg text-sm font-medium transition-all "+(i===e.value?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value)))})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"成長の軌跡"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:c?()=>d(!1):()=>{d(!0),m(0);const t=setInterval((()=>{m((s=>s>=e.length-1?(d(!1),clearInterval(t),e.length-1):s+1))}),500)},className:"p-2 bg-purple-100 text-purple-600 rounded-lg hover:bg-purple-200 transition-colors",children:c?s.jsx(v,{className:"w-5 h-5"}):s.jsx(y,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{const t=document.createElement("canvas");t.width=800,t.height=600;const s=t.getContext("2d"),l=s.createLinearGradient(0,0,800,600);l.addColorStop(0,"#f3e9ff"),l.addColorStop(1,"#fce7f3"),s.fillStyle=l,s.fillRect(0,0,800,600),s.font="bold 32px sans-serif",s.fillStyle="#7c3aed",s.textAlign="center",s.fillText("My Experience Strings",400,50),s.font="18px sans-serif",s.fillStyle="#6b7280",s.fillText(`${e.length} experiences`,400,90),s.fillText((new Date).toLocaleDateString("ja-JP"),400,115);const a=document.createElement("a");a.download=`experience-strings-${(new Date).toISOString().split("T")[0]}.png`,t.toBlob((e=>{a.href=URL.createObjectURL(e),a.click()}))},className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",children:s.jsx(f,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full transition-all duration-300",style:{width:x/Math.max(e.length-1,1)*100+"%"}})}),s.jsx("div",{className:"h-64 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 relative overflow-hidden",children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("p",{className:"text-gray-600",children:c?`${x+1} / ${e.length}`:"プレイボタンで再生"})})})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"カテゴリー分布"}),s.jsx("div",{className:"space-y-3",children:(()=>{const t={};return e.forEach((e=>{t[e.category]=(t[e.category]||0)+1})),Object.entries(t).sort(((e,t)=>t[1]-e[1]))})().map((([t,l])=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 w-32",children:t}),s.jsxs("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full",style:{width:l/e.length*100+"%"}}),s.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-xs text-gray-700 font-medium",children:[l,"件"]})]})]},t)))})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"特別な瞬間"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-purple-600 font-medium mb-1",children:"最初の体験"}),s.jsx("p",{className:"text-sm text-gray-700",children:(null==(a=e[0])?void 0:a.title)||"まだありません"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e[0]&&new Date(e[0].date).toLocaleDateString("ja-JP")})]}),s.jsxs("div",{className:"bg-pink-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-pink-600 font-medium mb-1",children:"最新の体験"}),s.jsx("p",{className:"text-sm text-gray-700",children:(null==(r=e[e.length-1])?void 0:r.title)||"まだありません"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e[e.length-1]&&new Date(e[e.length-1].date).toLocaleDateString("ja-JP")})]})]})]})]})})},U=({onBack:e,onSave:l})=>{const[a,r]=t.useState({title:"",category:"",emotion:"",description:"",tags:[],template:null}),n=[{value:"happy",label:"楽しかった",icon:k,color:"text-green-600"},{value:"neutral",label:"普通",icon:C,color:"text-yellow-600"},{value:"sad",label:"つらかった",icon:S,color:"text-red-600"},{value:"excited",label:"わくわく",icon:E,color:"text-pink-600"},{value:"surprised",label:"驚いた",icon:L,color:"text-purple-600"},{value:"proud",label:"誇らしい",icon:i,color:"text-blue-600"}];return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/60 rounded-full transition-colors",children:s.jsx(w,{className:"w-6 h-6 text-gray-600"})}),s.jsx("h1",{className:"text-xl font-bold text-gray-800 ml-3",children:"体験を記録"})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-4 mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"テンプレート（任意）"}),s.jsx("div",{className:"space-y-2",children:[{id:"discovery",title:"今日の小さな発見",prompts:["何を発見しましたか？","どんな気持ちになりましたか？"]},{id:"challenge",title:"挑戦したこと",prompts:["どんな挑戦でしたか？","結果はどうでしたか？"]},{id:"emotion",title:"心が動いた瞬間",prompts:["何に心を動かされましたか？","なぜそう感じたと思いますか？"]}].map((e=>s.jsxs("button",{onClick:()=>(e=>{r({...a,template:e.id,title:e.title,description:e.prompts.join("\n\n")})})(e),className:"w-full p-3 rounded-lg text-left transition-all "+(a.template===e.id?"bg-purple-100 border-2 border-purple-300":"bg-gray-50 border-2 border-transparent hover:bg-gray-100"),children:[s.jsx("p",{className:"font-medium text-gray-800",children:e.title}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.prompts[0]})]},e.id)))})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-4 mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["体験のタイトル ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:a.title,onChange:e=>r({...a,title:e.target.value}),placeholder:"どんな体験をしましたか？",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",maxLength:50})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-4 mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["カテゴリー ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["アート・創作","音楽・エンタメ","料理・グルメ","自然・アウトドア","スポーツ・運動","学習・読書","ソーシャル","ライフスタイル","その他"].map((e=>s.jsx("button",{onClick:()=>r({...a,category:e}),className:"p-2 rounded-lg text-xs font-medium transition-all "+(a.category===e?"bg-purple-100 text-purple-700 border-2 border-purple-300":"bg-gray-50 text-gray-700 border-2 border-transparent hover:bg-gray-100"),children:e},e)))})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-4 mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"今の気持ちは？"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:n.map((e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>r({...a,emotion:e.value}),className:"p-3 rounded-lg transition-all flex flex-col items-center gap-1 "+(a.emotion===e.value?"bg-purple-100 border-2 border-purple-300":"bg-gray-50 border-2 border-transparent hover:bg-gray-100"),children:[s.jsx(t,{className:`w-5 h-5 ${e.color}`}),s.jsx("span",{className:"text-xs font-medium text-gray-700",children:e.label})]},e.value)}))})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-4 mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"感情タグ（複数選択可）"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["新鮮だった","挑戦的だった","心地よかった","刺激的だった","平和だった","感動した","学びがあった","成長を感じた"].map((e=>s.jsx("button",{onClick:()=>(e=>{r({...a,tags:a.tags.includes(e)?a.tags.filter((t=>t!==e)):[...a.tags,e]})})(e),className:"px-3 py-1 rounded-full text-xs font-medium transition-all "+(a.tags.includes(e)?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e)))})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-4 mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"詳細（任意）"}),s.jsx("textarea",{value:a.description,onChange:e=>r({...a,description:e.target.value}),placeholder:"体験の詳細や感想を記録してみましょう...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none",rows:5,maxLength:300}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[a.description.length,"/300文字"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>{a.title&&a.category&&l({...a,date:new Date,type:"journal",completed:!0,level:2})},disabled:!a.title||!a.category,className:"w-full py-3 rounded-xl font-medium transition-all flex items-center justify-center gap-2 "+(a.title&&a.category?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[s.jsx(O,{className:"w-4 h-4"}),"体験を保存"]}),s.jsx("button",{onClick:e,className:"w-full py-3 bg-gray-100 text-gray-600 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:"戻る"})]})]})})},B=({onBack:e,onJoinChallenge:l})=>{const[a,r]=t.useState([]),[i,n]=t.useState(null),o=[{id:"local-first",title:"地元再発見ウィーク",description:"普段通り過ぎる地元の魅力を再発見しよう",duration:"7日間",participants:234,difficulty:2,rewards:["地元探検家バッジ","多様性スコア+10"],challenges:["地元の歴史スポットを訪れる","地元の老舗で食事","地元の図書館で郷土資料を読む"]},{id:"creative-week",title:"クリエイティブチャレンジ",description:"創造性を解放する1週間",duration:"7日間",participants:189,difficulty:3,rewards:["アーティストバッジ","創造性スコア+15"],challenges:["絵を描いてみる","楽器に触れる","詩や短編を書く"]},{id:"mindful-days",title:"マインドフル3Days",description:"心と向き合う3日間",duration:"3日間",participants:456,difficulty:1,rewards:["内省バッジ","ウェルビーイングスコア+5"],challenges:["瞑想を試す","デジタルデトックス1時間","感謝日記を書く"]}];t.useEffect((()=>{r(o)}),[]);return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/60 rounded-full transition-colors",children:s.jsx(w,{className:"w-6 h-6 text-gray-600"})}),s.jsx("h1",{className:"text-xl font-bold text-gray-800 ml-3",children:"テーマチャレンジ"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(d,{className:"w-5 h-5 text-purple-600"}),s.jsx("h3",{className:"font-bold text-purple-800",children:"期間限定チャレンジ"})]}),s.jsx("p",{className:"text-sm text-purple-700",children:"みんなで同じテーマに挑戦！特別なバッジや報酬がもらえます"})]}),s.jsx("div",{className:"space-y-4",children:a.map((e=>s.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all cursor-pointer",onClick:()=>n(e),children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("h3",{className:"font-bold text-gray-800",children:e.title}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:e.difficulty},((e,t)=>s.jsx("div",{className:"w-2 h-2 bg-purple-600 rounded-full"},t)))})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(P,{className:"w-3 h-3"}),e.duration]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(D,{className:"w-3 h-3"}),e.participants,"人参加中"]})]}),s.jsx("div",{className:"mt-3 flex gap-2",children:e.rewards.slice(0,2).map(((e,t)=>s.jsx("span",{className:"px-2 py-1 bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-800 rounded-full text-xs",children:e},t)))})]},e.id)))}),i&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-sm w-full shadow-2xl",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:i.title}),s.jsx("p",{className:"text-gray-600 mb-4",children:i.description}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"チャレンジ内容"}),s.jsx("ul",{className:"space-y-1",children:i.challenges.map(((e,t)=>s.jsxs("li",{className:"text-sm text-gray-600 flex items-start gap-2",children:[s.jsx("span",{className:"text-purple-600",children:"•"}),e]},t)))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"獲得できる報酬"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:i.rewards.map(((e,t)=>s.jsxs("span",{className:"px-3 py-1 bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-800 rounded-full text-sm flex items-center gap-1",children:[s.jsx(T,{className:"w-3 h-3"}),e]},t)))})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{l(i)},className:"flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-medium shadow-lg hover:shadow-xl",children:"参加する"}),s.jsx("button",{onClick:()=>n(null),className:"px-4 py-3 bg-gray-100 text-gray-600 rounded-xl font-medium hover:bg-gray-200",children:"閉じる"})]})]})})]})})};export{R as H,U as J,$ as O,M as P,J as R,_ as S,B as T};
